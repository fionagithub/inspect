<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width,viewport-fit=cover">
  <title>Laputa App</title>
  <link rel="shortcut icon" type="image/x-icon" href="statics/favicon.ico">
</head>
<body>
  <div id="q-app"></div>
  <!-- <script type="text/javascript" src="cordova.js"></script> -->
  <script>(function (global) { var startY = 0; var enabled = false; var handleTouchmove = function (evt) { var el = evt.target; while (el !== document.body && el !== document) { var style = window.getComputedStyle(el); if (!style) { break } if (el.nodeName === "INPUT" && el.getAttribute("type") === "range") { return } var scrolling = style.getPropertyValue("-webkit-overflow-scrolling"); var overflowY = style.getPropertyValue("overflow-y"); var height = parseInt(style.getPropertyValue("height"), 10); var isScrollable = scrolling === "touch" && (overflowY === "auto" || overflowY === "scroll"); var canScroll = el.scrollHeight > el.offsetHeight; if (isScrollable && canScroll) { var curY = evt.touches ? evt.touches[0].screenY : evt.screenY; var isAtTop = startY <= curY && el.scrollTop === 0; var isAtBottom = startY >= curY && el.scrollHeight - el.scrollTop === height; if (isAtTop || isAtBottom) { evt.preventDefault() } return } el = el.parentNode } evt.preventDefault() }; var handleTouchstart = function (evt) { startY = evt.touches ? evt.touches[0].screenY : evt.screenY }; var enable = function () { window.addEventListener("touchstart", handleTouchstart, false); window.addEventListener("touchmove", handleTouchmove, false); enabled = true }; var disable = function () { window.removeEventListener("touchstart", handleTouchstart, false); window.removeEventListener("touchmove", handleTouchmove, false); enabled = false }; var isEnabled = function () { return enabled }; var testDiv = document.createElement("div"); document.documentElement.appendChild(testDiv); testDiv.style.WebkitOverflowScrolling = "touch"; var scrollSupport = "getComputedStyle" in window && window.getComputedStyle(testDiv)["-webkit-overflow-scrolling"] === "touch"; document.documentElement.removeChild(testDiv); if (scrollSupport) { enable() } var iNoBounce = { enable: enable, disable: disable, isEnabled: isEnabled }; if (typeof module !== "undefined" && module.exports) { module.exports = iNoBounce } if (typeof global.define === "function") { (function (define) { define("iNoBounce", [], function () { return iNoBounce }) })(global.define) } else { global.iNoBounce = iNoBounce } })(this);
  </script>
  <script>
      window.isMobile=false
    var onDeviceReady = function () {
      window.isMobile=true // cordova 成功运行在移动端时，设置移动端的初始值
        initiateUI();
    };

// 获取app key
var getRegistrationID = function () {
  window.JPush.getRegistrationID(onGetRegistrationID);
};
var onGetRegistrationID = function (data) {
  try {
    console.log("JPushPlugin:registrationID is " + data);

    if (data.length == 0) {
      var t1 = window.setTimeout(getRegistrationID, 1000);
    }
    console.log('-----app key id-----', data)
  } catch (exception) {
    console.log(exception);
  }
};


var initiateUI = function () {
  try {
    window.JPush.init();
    window.setTimeout(getRegistrationID, 1000);
    if (window.Platform != "android") {
      window.JPush.setDebugModeFromIos();
      window.JPush.setApplicationIconBadgeNumber(0);
    } else {
      window.JPush.setDebugMode(true);
      window.JPush.setStatisticsOpen(true);
    }
  } catch (exception) {
    console.log(exception);
  }
};
//通知栏打开推送消息
document.addEventListener("deviceready", onDeviceReady, false);

  </script>
</body>
</html>